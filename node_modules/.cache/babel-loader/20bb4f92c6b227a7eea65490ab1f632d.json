{"ast":null,"code":"import axios from \"axios\";\nimport { createReducer, createAsyncThunk } from \"@reduxjs/toolkit\";\nexport const sendLoginRequest = createAsyncThunk(\"LOGIN\", (userEmail, userPass) => {\n  return axios.post(\"/api/login\").then(res => res.data);\n});\nexport const registerUser = createAsyncThunk(\"REGISTER\", (userEmail, userPass) => {\n  console.log(\"UserEmail:\", userEmail);\n  return axios.post(\"/api/register\", {\n    email: userEmail.value,\n    password: userPass.value\n  }).then(res => res.data);\n});\nexport const addToFavorites = createAsyncThunk(\"ADD_TO_FAVORITES\", (movieId, thunkAPI) => {\n  const {\n    user\n  } = thunkAPI.getState();\n  if (!user.id) throw new Error(\"You need to be logged in\");\n  return axios.put(`/api/favorites?userId=${user.id}&movieId=${movieId}`).then(res => res.data);\n});\nexport const removeFromFavorites = createAsyncThunk(\"REMOVE_FROM_FAVORITES\", (movieId, thunkAPI) => {\n  const {\n    user\n  } = thunkAPI.getState();\n  if (!user.id) throw new Error(\"You need to be logged in\");\n  return axios.delete(`/api/favorites?userId=${user.id}&movieId=${movieId}`).then(res => res.data);\n});\nconst userReducer = createReducer([], {\n  [sendLoginRequest.fulfilled]: (state, action) => action.payload,\n  [registerUser.fulfilled]: (state, action) => action.payload,\n  [addToFavorites.fulfilled]: (state, action) => action.payload,\n  [removeFromFavorites.fulfilled]: (state, action) => action.payload\n});\nexport default userReducer;","map":{"version":3,"sources":["/Users/guillermosotelo/Documents/P5/BC/26-checkpoint-OMDB/src/store/user.js"],"names":["axios","createReducer","createAsyncThunk","sendLoginRequest","userEmail","userPass","post","then","res","data","registerUser","console","log","email","value","password","addToFavorites","movieId","thunkAPI","user","getState","id","Error","put","removeFromFavorites","delete","userReducer","fulfilled","state","action","payload"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,EAAwBC,gBAAxB,QAAgD,kBAAhD;AAEA,OAAO,MAAMC,gBAAgB,GAAGD,gBAAgB,CAAC,OAAD,EAAU,CAACE,SAAD,EAAYC,QAAZ,KAAyB;AACjF,SAAOL,KAAK,CAACM,IAAN,CAAW,YAAX,EAAyBC,IAAzB,CAA+BC,GAAD,IAASA,GAAG,CAACC,IAA3C,CAAP;AACD,CAF+C,CAAzC;AAIP,OAAO,MAAMC,YAAY,GAAGR,gBAAgB,CAAC,UAAD,EAAa,CAACE,SAAD,EAAYC,QAAZ,KAAyB;AAChFM,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BR,SAA1B;AACA,SAAOJ,KAAK,CAACM,IAAN,CAAW,eAAX,EAA4B;AACjCO,IAAAA,KAAK,EAAET,SAAS,CAACU,KADgB;AAEjCC,IAAAA,QAAQ,EAAEV,QAAQ,CAACS;AAFc,GAA5B,EAGJP,IAHI,CAGEC,GAAD,IAASA,GAAG,CAACC,IAHd,CAAP;AAID,CAN2C,CAArC;AAQP,OAAO,MAAMO,cAAc,GAAGd,gBAAgB,CAC5C,kBAD4C,EAE5C,CAACe,OAAD,EAAUC,QAAV,KAAuB;AACrB,QAAM;AAAEC,IAAAA;AAAF,MAAWD,QAAQ,CAACE,QAAT,EAAjB;AACA,MAAI,CAACD,IAAI,CAACE,EAAV,EAAc,MAAM,IAAIC,KAAJ,CAAU,0BAAV,CAAN;AACd,SAAOtB,KAAK,CACTuB,GADI,CACC,yBAAwBJ,IAAI,CAACE,EAAG,YAAWJ,OAAQ,EADpD,EAEJV,IAFI,CAEEC,GAAD,IAASA,GAAG,CAACC,IAFd,CAAP;AAGD,CAR2C,CAAvC;AAWP,OAAO,MAAMe,mBAAmB,GAAGtB,gBAAgB,CACjD,uBADiD,EAEjD,CAACe,OAAD,EAAUC,QAAV,KAAuB;AACrB,QAAM;AAAEC,IAAAA;AAAF,MAAWD,QAAQ,CAACE,QAAT,EAAjB;AACA,MAAI,CAACD,IAAI,CAACE,EAAV,EAAc,MAAM,IAAIC,KAAJ,CAAU,0BAAV,CAAN;AACd,SAAOtB,KAAK,CACTyB,MADI,CACI,yBAAwBN,IAAI,CAACE,EAAG,YAAWJ,OAAQ,EADvD,EAEJV,IAFI,CAEEC,GAAD,IAASA,GAAG,CAACC,IAFd,CAAP;AAGD,CARgD,CAA5C;AAWP,MAAMiB,WAAW,GAAGzB,aAAa,CAAC,EAAD,EAAK;AACpC,GAACE,gBAAgB,CAACwB,SAAlB,GAA8B,CAACC,KAAD,EAAQC,MAAR,KAAmBA,MAAM,CAACC,OADpB;AAEpC,GAACpB,YAAY,CAACiB,SAAd,GAA0B,CAACC,KAAD,EAAQC,MAAR,KAAmBA,MAAM,CAACC,OAFhB;AAGpC,GAACd,cAAc,CAACW,SAAhB,GAA4B,CAACC,KAAD,EAAQC,MAAR,KAAmBA,MAAM,CAACC,OAHlB;AAIpC,GAACN,mBAAmB,CAACG,SAArB,GAAiC,CAACC,KAAD,EAAQC,MAAR,KAAmBA,MAAM,CAACC;AAJvB,CAAL,CAAjC;AAOA,eAAeJ,WAAf","sourcesContent":["import axios from \"axios\"\nimport { createReducer, createAsyncThunk } from \"@reduxjs/toolkit\"\n\nexport const sendLoginRequest = createAsyncThunk(\"LOGIN\", (userEmail, userPass) => {\n  return axios.post(\"/api/login\").then((res) => res.data)\n})\n\nexport const registerUser = createAsyncThunk(\"REGISTER\", (userEmail, userPass) => {\n  console.log(\"UserEmail:\", userEmail)\n  return axios.post(\"/api/register\", {\n    email: userEmail.value,\n    password: userPass.value\n  }).then((res) => res.data)\n})\n\nexport const addToFavorites = createAsyncThunk(\n  \"ADD_TO_FAVORITES\",\n  (movieId, thunkAPI) => {\n    const { user } = thunkAPI.getState();\n    if (!user.id) throw new Error(\"You need to be logged in\")\n    return axios\n      .put(`/api/favorites?userId=${user.id}&movieId=${movieId}`)\n      .then((res) => res.data)\n  }\n)\n\nexport const removeFromFavorites = createAsyncThunk(\n  \"REMOVE_FROM_FAVORITES\",\n  (movieId, thunkAPI) => {\n    const { user } = thunkAPI.getState();\n    if (!user.id) throw new Error(\"You need to be logged in\")\n    return axios\n      .delete(`/api/favorites?userId=${user.id}&movieId=${movieId}`)\n      .then((res) => res.data)\n  }\n)\n\nconst userReducer = createReducer([], {\n  [sendLoginRequest.fulfilled]: (state, action) => action.payload,\n  [registerUser.fulfilled]: (state, action) => action.payload,\n  [addToFavorites.fulfilled]: (state, action) => action.payload,\n  [removeFromFavorites.fulfilled]: (state, action) => action.payload,\n});\n\nexport default userReducer;"]},"metadata":{},"sourceType":"module"}