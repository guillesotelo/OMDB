{"ast":null,"code":"import axios from \"axios\";\nimport { createReducer, createAsyncThunk } from \"@reduxjs/toolkit\"; //----------LOG----------\n\nexport const registerUser = createAsyncThunk(\"REGISTER\", ({\n  userEmail,\n  userPass\n}) => {\n  return axios.post(\"/api/register\", {\n    email: userEmail.target.value,\n    password: userPass.target.value\n  });\n});\nexport const sendLoginRequest = createAsyncThunk(\"LOGIN\", ({\n  userEmail,\n  userPass\n}) => {\n  return axios.post(\"/api/login\", {\n    email: userEmail.target.value,\n    password: userPass.target.value\n  });\n});\nexport const sendLogOutRequest = createAsyncThunk(\"LOGOUT\", () => {\n  return axios.post(\"/api/logout\");\n}); //---------FAVORITES---------\n\nexport const getFavorites = createAsyncThunk(\"GET_FAVORITES\", () => {\n  // console.log(\"MOVIE NAME: \",movieName.target.value)\n  return axios.get(`/api/favorites`).then(res => res.data); //get: api/movies\n});\nexport const addToFavorites = createAsyncThunk(\"ADD_TO_FAVORITES\", (movieId, thunkAPI) => {\n  const {\n    user\n  } = thunkAPI.getState(); // console.log(\"USER: \",user)\n\n  if (!user.data.id) throw new Error(\"You need to be logged in\");\n  return axios.post(`/api/favorites`, {\n    userId: user.data.id,\n    movieId: movieId\n  }).then(res => res.data);\n});\nexport const removeFromFavorites = createAsyncThunk(\"REMOVE_FROM_FAVORITES\", (movieId, thunkAPI) => {\n  const {\n    user\n  } = thunkAPI.getState();\n  if (!user.data.id) throw new Error(\"You need to be logged in\");\n  return axios.delete(`/api/favorites?userId=${user.data.id}&movieId=${movieId}`).then(res => res.data);\n}); //REDUCERS\n\nconst userReducer = createReducer([], {\n  [sendLoginRequest.fulfilled]: (state, action) => action.payload,\n  [registerUser.fulfilled]: (state, action) => action.payload,\n  [addToFavorites.fulfilled]: (state, action) => action.payload,\n  [removeFromFavorites.fulfilled]: (state, action) => action.payload\n});\nexport default userReducer;","map":{"version":3,"sources":["/Users/guillermosotelo/Documents/P5/BC/26-checkpoint-OMDB/src/store/user.js"],"names":["axios","createReducer","createAsyncThunk","registerUser","userEmail","userPass","post","email","target","value","password","sendLoginRequest","sendLogOutRequest","getFavorites","get","then","res","data","addToFavorites","movieId","thunkAPI","user","getState","id","Error","userId","removeFromFavorites","delete","userReducer","fulfilled","state","action","payload"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport { createReducer, createAsyncThunk } from \"@reduxjs/toolkit\"\n\n\n//----------LOG----------\n\nexport const registerUser = createAsyncThunk(\"REGISTER\", ({userEmail, userPass}) => {\n  return axios.post(\"/api/register\", {\n    email: userEmail.target.value,\n    password: userPass.target.value\n  })\n})\n\nexport const sendLoginRequest = createAsyncThunk(\"LOGIN\", ({userEmail, userPass}) => {\n  return axios.post(\"/api/login\", {\n    email: userEmail.target.value,\n    password: userPass.target.value\n  })\n})\n\nexport const sendLogOutRequest = createAsyncThunk(\"LOGOUT\", () => {\n  return axios.post(\"/api/logout\")\n})\n\n\n\n\n//---------FAVORITES---------\n\nexport const getFavorites = createAsyncThunk(\"GET_FAVORITES\", () => {\n  // console.log(\"MOVIE NAME: \",movieName.target.value)\n  return axios.get(`/api/favorites`).then((res) => res.data)\n  //get: api/movies\n})\n\nexport const addToFavorites = createAsyncThunk(\n  \"ADD_TO_FAVORITES\",\n  (movieId, thunkAPI) => {\n    const { user } = thunkAPI.getState();\n    // console.log(\"USER: \",user)\n    if (!user.data.id) throw new Error(\"You need to be logged in\")\n    return axios\n      .post(`/api/favorites`,{\n        userId: user.data.id,\n        movieId: movieId\n      })\n      .then((res) => res.data)\n  }\n)\n\nexport const removeFromFavorites = createAsyncThunk(\n  \"REMOVE_FROM_FAVORITES\",\n  (movieId, thunkAPI) => {\n    const { user } = thunkAPI.getState();\n    if (!user.data.id) throw new Error(\"You need to be logged in\")\n    return axios\n      .delete(`/api/favorites?userId=${user.data.id}&movieId=${movieId}`)\n      .then((res) => res.data)\n  }\n)\n\n\n\n//REDUCERS\n\nconst userReducer = createReducer([], {\n  [sendLoginRequest.fulfilled]: (state, action) => action.payload,\n  [registerUser.fulfilled]: (state, action) => action.payload,\n  [addToFavorites.fulfilled]: (state, action) => action.payload,\n  [removeFromFavorites.fulfilled]: (state, action) => action.payload,\n});\n\nexport default userReducer;"]},"metadata":{},"sourceType":"module"}